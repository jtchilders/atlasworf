[DEFAULT]
base_path               = /lus/theta-fs0/projects/AtlasADSP/machinelearning/bjet_prod
atlas_local_root_base   = /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase
workflow                = lhe,generate,simulate,reconstruct
events_per_rank         = 1000
athena_proc_number      = 2

[lhe_settings]
enabled              = true
command              = %(base_path)s/lhe_prod/lhegun.py
athena_app           = false
numpy_seed_offset    = 0

[lhe_args]
numevents            = %(events_per_rank)s
numfiles             = 1
outfile-base         = {outfile_base}
ecm                  = 13000
eta-max              = 2.0
min-e                = 10.0
max-e                = 100.0
numpy-seed           = 0


[generate_settings]
enabled              = true
command              = Generate_tf.py
athena_app           = true
output_script_name   = gen_run_script.sh
use_container        = true
container_prefix_cmd = singularity exec -B /lus/theta-fs0/projects/AtlasADSP:/lus/theta-fs0/projects/AtlasADSP:rw -B /gpfs/mira-home/parton:/gpfs/mira-home/parton:rw /lus/theta-fs0/projects/AtlasADSP/atlas/singularity_images/centos6-cvmfs.atlas.cern.ch.x86_64-slc6-gcc47.r19.2.5.201804250920.sqsh
release              = 19.2.5.32.2
package              = MCProd
cmtConfig            = x86_64-slc6-gcc47-opt
gcclocation          = 
event_counter_offset = 0
use_mp               = false

[generate_args]
jobConfig            = /lus/theta-fs0/projects/AtlasADSP/machinelearning/bjet_prod/evnt_prod/gentf_jo.py
preExec              = "input_lhe_filename='{input_filename}'"
outputEVNTFile       = output_file
runNumber            = 1 
ecmEnergy            = 13000 
evgenJobOpts         = MC15JobOpts-00-04-24_v0.tar.gz
firstEvent           = {firstEvent}

[simulate_settings]
enabled              = true
command              = Sim_tf.py
athena_app           = true
output_script_name   = sim_run_script.sh
use_container        = true
container_prefix_cmd = singularity exec -B /lus/theta-fs0/projects/AtlasADSP:/lus/theta-fs0/projects/AtlasADSP:rw -B /gpfs/mira-home/parton:/gpfs/mira-home/parton:rw /lus/theta-fs0/projects/AtlasADSP/atlas/singularity_images/stripped/centos6-cvmfs.atlas.cern.ch.x86_64-slc6-gcc49n62.201804250020.sqsh
release              = 21.0.15
package              = AtlasOffline
cmtConfig            = x86_64-slc6-gcc49-opt
gcclocation          = 
event_counter_offset = 0
use_mp               = true

[simulate_args]
conditionsTag        = default:OFLCOND-MC16-SDR-14
geometryVersion      = ATLAS-R2-2016-01-00-01_VALIDATION
inputEVNTFile        = inputEVNTFile
outputHITSFile       = outputHITSFile
preInclude           = "EVNTtoHITS:SimulationJobOptions/preInclude.BeamPipeKill.py,SimulationJobOptions/preInclude.FrozenShowersFCalOnly.py"
postInclude          = default:RecJobTransforms/UseFrontier.py
DBRelease            = all:current
preExec              = "EVNTtoHITS:simFlags.SimBarcodeOffset.set_Value_and_Lock(200000);simFlags.TRTRangeCut=30.0;simFlags.TightMuonStepping=True"
physicsList          = FTFP_BERT_ATL_VALIDATION
DataRunNumber        = 2010304
simulator            = FullG4
truthStrategy        = MC15aPlus
maxEvents            = 10

[reconstruct_settings]
enabled              = true
command              = Reco_tf.py
athena_app           = true
output_script_name   = reco_run_script.sh
use_container        = true
container_prefix_cmd = singularity exec -B /lus/theta-fs0/projects/AtlasADSP:/lus/theta-fs0/projects/AtlasADSP:rw -B /gpfs/mira-home/parton:/gpfs/mira-home/parton:rw /lus/theta-fs0/projects/AtlasADSP/atlas/singularity_images/stripped/centos6-cvmfs.atlas.cern.ch.x86_64-slc6-gcc49n62.201804250020.sqsh
release              = 21.0.20
package              = AtlasOffline
cmtConfig            = x86_64-slc6-gcc62-opt
gcclocation          = 
event_counter_offset = 0
use_mp               = true

[reconstruct_args]
conditionsTag        = default:OFLCOND-MC16-SDR-16
geometryVersion      = default:ATLAS-R2-2016-01-00-01
inputHITSFile        = inputHITSFile
outputESDFile        = outputESDFile
outputRDOFile        = outputRDOFile
postInclude          = default:RecJobTransforms/UseFrontier.py
preExec              = 'all:rec.Commissioning.set_Value_and_Lock(True);
   from AthenaCommon.BeamFlags import jobproperties;
   jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);
   from LArROD.LArRODFlags import larRODFlags;
   larRODFlags.NumberOfCollisions.set_Value_and_Lock(20);
   larRODFlags.nSamples.set_Value_and_Lock(4);
   larRODFlags.doOFCPileupOptimization.set_Value_and_Lock(True);
   larRODFlags.firstSample.set_Value_and_Lock(0);
   larRODFlags.useHighestGainAutoCorr.set_Value_and_Lock(True)' 'all:from TriggerJobOpts.TriggerFlags import TriggerFlags as TF;
   TF.run2Config='"'"'2016'"'"'' 'RAWtoESD:from InDetRecExample.InDetJobProperties import InDetFlags;
   InDetFlags.cutLevel.set_Value_and_Lock(14);
   from JetRec import JetRecUtils;
   f=lambda s:["xAOD::JetContainer#AntiKt4%%sJets"%%(s,),"xAOD::JetAuxContainer#AntiKt4%%sJetsAux."%%(s,),"xAOD::EventShape#Kt4%%sEventShape"%%(s,),"xAOD::EventShapeAuxInfo#Kt4%%sEventShapeAux."%%(s,),"xAOD::EventShape#Kt4%%sOriginEventShape"%%(s,),"xAOD::EventShapeAuxInfo#Kt4%%sOriginEventShapeAux."%%(s,)];
   JetRecUtils.retrieveAODList = lambda : f("EMPFlow")+f("LCTopo")+f("EMTopo")+["xAOD::EventShape#NeutralParticleFlowIsoCentralEventShape","xAOD::EventShapeAuxInfo#NeutralParticleFlowIsoCentralEventShapeAux.", "xAOD::EventShape#NeutralParticleFlowIsoForwardEventShape","xAOD::EventShapeAuxInfo#NeutralParticleFlow   IsoForwardEventShapeAux.", "xAOD::EventShape#ParticleFlowIsoCentralEventShape","xAOD::EventShapeAuxInfo#ParticleFlowIsoCentralEventShapeAux.", "xAOD::EventShape#ParticleFlowIsoForwardEventShape","xAOD::EventShapeAuxInfo#ParticleFlowIsoForwardEventShapeAux.", "xAOD::EventShape#TopoClusterIsoCentralEventShape   ","xAOD::EventShapeAuxInfo#TopoClusterIsoCentralEventShapeAux.", "xAOD::EventShape#TopoClusterIsoForwardEventShape","xAOD::EventShapeAuxInfo#TopoClusterIsoForwardEventShapeAux.","xAOD::CaloClusterContainer#EMOriginTopoClusters","xAOD::ShallowAuxContainer#EMOriginTopoClustersAux.","xAOD::CaloClusterContainer   #LCOriginTopoClusters","xAOD::ShallowAuxContainer#LCOriginTopoClustersAux."];
   from eflowRec.eflowRecFlags import jobproperties;
   jobproperties.eflowRecFlags.useAODReductionClusterMomentList.set_Value_and_Lock(True);
   from TriggerJobOpts.TriggerFlags import TriggerFlags;
   TriggerFlags.AODEDMSet.set_Value_and_Lock("AODSLIM");' 'all:from BTagging.BTaggingFlags import BTaggingFlags;
   BTaggingFlags.btaggingAODList=["xAOD::BTaggingContainer#BTagging_AntiKt4EMTopo","xAOD::BTaggingAuxContainer#BTagging_AntiKt4EMTopoAux.","xAOD::BTagVertexContainer#BTagging_AntiKt4EMTopoJFVtx","xAOD::BTagVertexAuxContainer#BTagging_AntiKt4EMTopoJFVtxAux.","xAOD::VertexContainer#BTagging_AntiKt4EMTopoSecVtx",   "xAOD::VertexAuxContainer#BTagging_AntiKt4EMTopoSecVtxAux.-vxTrackAtVertex"];' 'ESDtoAOD:from ParticleBuilderOptions.AODFlags import AODFlags;
   AODFlags.ThinGeantTruth.set_Value_and_Lock(True);
   AODFlags.ThinNegativeEnergyCaloClusters.set_Value_and_Lock(True);
   AODFlags.ThinNegativeEnergyNeutralPFOs.set_Value_and_Lock(True);
   from JetRec import JetRecUtils;
   aodlist = JetRecUtils.retrieveAODList();
   JetRecUtils.retrieveAODList = lambda : [item for item in aodlist if not "OriginTopoClusters" in item];'

postExec             = 'all:CfgMgr.MessageSvc().setError+=["HepMcParticleLink"]' 'ESDtoAOD:fixedAttrib=[s if "CONTAINER_SPLITLEVEL = '"'"'99'"'"'" not in s else "" for s in svcMgr.AthenaPoolCnvSvc.PoolAttributes]; svcMgr.AthenaPoolCnvSvc.PoolAttributes=fixedAttrib' 'RDOtoRDOTrigger:conddb.addOverride("/CALO/Ofl/Noise/PileUpNoiseLumi","CALOOflNoisePileUpNoiseLumi-mc15-mu30-dt25ns")' 'ESDtoAOD:CILMergeAOD.removeItem("xAOD::CaloClusterAuxContainer#CaloCalTopoClustersAux.LATERAL.LONGITUDINAL.SECOND_R.SECOND_LAMBDA.CENTER_MA   G.CENTER_LAMBDA.FIRST_ENG_DENS.ENG_FRAC_MAX.ISOLATION.ENG_BAD_CELLS.N_BAD_CELLS.BADLARQ_FRAC.ENG_BAD_HV_CELLS.N_BAD_HV_CELLS.ENG_POS.SIGNIFICANCE.CELL_SIGNIFICANCE.CELL_SIG_SAMPLING.AVG_LAR_Q.AVG_TILE_Q.EM_PROBABILITY.PTD.BadChannelList"); CILMergeAOD.add("xAOD::CaloClusterAuxContainer#CaloCalTopoClustersAux.N_BAD_CELLS.ENG_BAD_CELLS.BADLARQ_FRAC.AVG_TILE_Q.AVG_LAR_Q.CENTER_MAG.ENG_POS.CENTER_LAMBDA.SECOND_LAMBDA.SECOND_R.ISOLATION.EM_PROBABILITY"); StreamAOD.ItemList=CILMergeAOD()'

maxEvents            = 10
skipEvents           = 0
autoConfiguration    = everything
runNumber            = 1
digiSeedOffset1      = 9
digiSeedOffset2      = 9
digiSteeringConf     = StandardSignalOnlyTruth
AMITag               = r9364
jobNumber            = 1
DBRelease            = current
